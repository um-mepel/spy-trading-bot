<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Trading Bot | S&P 500 Stock Picker</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="bg-grid"></div>
    <div class="gradient-orb orb-1"></div>
    <div class="gradient-orb orb-2"></div>

    <header>
        <div class="logo">
            <div class="logo-icon">üìà</div>
            AI Trading Bot
        </div>
        <nav>
            <a href="index.html" class="active">Stock Picker</a>
            <a href="minute-model.html">Minute Model</a>
            <a href="daily-model.html">Daily Model</a>
            <a href="https://github.com/um-mepel/spy-trading-bot" target="_blank">GitHub</a>
        </nav>
    </header>

    <main>
        <section class="hero">
            <div class="hero-badge">üöÄ FLAGSHIP STRATEGY</div>
            <h1>S&P 500 Stock Picker</h1>
            <p>A LightGBM-powered daily stock selection strategy achieving <strong>229.95% returns</strong> over 6 years
               vs SPY's 132.34%. Deployed live on Alpaca Paper Trading.</p>
            
            <div class="stats-grid">
                <div class="stat-card glow-cyan">
                    <div class="stat-value">+229.95%</div>
                    <div class="stat-label">6-Year Return</div>
                </div>
                <div class="stat-card glow-green">
                    <div class="stat-value">+97.6%</div>
                    <div class="stat-label">Alpha vs SPY</div>
                </div>
                <div class="stat-card glow-purple">
                    <div class="stat-value">7,569</div>
                    <div class="stat-label">Total Trades</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">51.5%</div>
                    <div class="stat-label">Win Rate</div>
                </div>
            </div>
        </section>

        <!-- Metrics Dashboard -->
        <section>
            <div class="chart-container">
                <img src="assets/metrics_dashboard.png" alt="Key Metrics Dashboard" style="width: 100%;">
            </div>
        </section>

        <!-- Model Cards -->
        <section class="model-comparison">
            <div class="comparison-cards">
                <a href="index.html" class="model-card active">
                    <div class="model-icon">üéØ</div>
                    <h3>S&P 500 Stock Picker</h3>
                    <p>Daily predictions for all ~450 S&P 500 stocks, holding top picks for 5 days</p>
                    <ul>
                        <li>229.95% return (2020-2026)</li>
                        <li>5 stocks per day, 5-day hold</li>
                        <li>Monthly model retraining</li>
                        <li>Live on Alpaca (paper)</li>
                    </ul>
                    <span class="model-tag current">Currently Viewing</span>
                </a>
                <a href="minute-model.html" class="model-card">
                    <div class="model-icon">‚ö°</div>
                    <h3>Minute-by-Minute Model</h3>
                    <p>Real-time SPY predictions every 60 seconds</p>
                    <ul>
                        <li>+17.68% 6-month return</li>
                        <li>56.74% accuracy</li>
                        <li>928K training bars</li>
                        <li>Extended hours trading</li>
                    </ul>
                    <span class="model-tag">View Minute Model ‚Üí</span>
                </a>
            </div>
        </section>

        <!-- Strategy Performance -->
        <section id="results">
            <div class="section-header">
                <h2>Strategy Performance</h2>
                <p>Extended backtest on S&P 500 stocks from January 2020 to May 2026</p>
            </div>

            <div class="chart-container">
                <div class="chart-title">Portfolio Growth & Analysis</div>
                <img src="assets/stock_picker_performance.png" alt="Stock Picker Performance">
            </div>

            <div class="two-col">
                <div class="chart-container">
                    <div class="chart-title">Strategy Comparison</div>
                    <img src="assets/strategy_comparison.png" alt="Strategy Comparison">
                </div>
                <div class="chart-container">
                    <div class="chart-title">Fee Impact by Platform</div>
                    <img src="assets/fee_impact_comparison.png" alt="Fee Impact">
                </div>
            </div>
        </section>

        <!-- How It Works -->
        <section id="how-it-works">
            <div class="section-header">
                <h2>How It Works</h2>
                <p>The strategy uses machine learning to predict which S&P 500 stocks will outperform</p>
            </div>

            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <h3>1. Data Collection</h3>
                    <p>Download price data for all ~450 S&P 500 stocks using yfinance</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üîß</div>
                    <h3>2. Feature Engineering</h3>
                    <p>Calculate technical indicators: RSI, MACD, Bollinger Bands, momentum, volatility</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ü§ñ</div>
                    <h3>3. Model Training</h3>
                    <p>Train LightGBM classifier to predict 5-day direction, retrained monthly</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üéØ</div>
                    <h3>4. Stock Selection</h3>
                    <p>Each day, pick top 5 stocks by probability, allocate 4% portfolio each</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">‚è±Ô∏è</div>
                    <h3>5. 5-Day Hold</h3>
                    <p>Hold positions for exactly 5 trading days, then auto-close</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üîÑ</div>
                    <h3>6. Repeat</h3>
                    <p>Process repeats daily at market open, compounding returns</p>
                </div>
            </div>
        </section>

        <!-- Backtest Details -->
        <section id="backtest">
            <div class="section-header">
                <h2>Backtest Details</h2>
                <p>Comprehensive 6-year extended backtest results</p>
            </div>

            <div class="performance-table">
                <h3>üìä Key Metrics</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Metric</th>
                            <th>Value</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="highlight-row">
                            <td>Total Return</td>
                            <td class="positive">+229.95%</td>
                            <td>vs SPY +132.34%</td>
                        </tr>
                        <tr>
                            <td>Alpha Generated</td>
                            <td class="positive">+97.6%</td>
                            <td>Outperformance vs benchmark</td>
                        </tr>
                        <tr class="highlight-row">
                            <td>Test Period</td>
                            <td>Jan 2020 - May 2026</td>
                            <td>6+ years, includes COVID crash</td>
                        </tr>
                        <tr>
                            <td>Total Trades</td>
                            <td>7,569</td>
                            <td>~5 trades/day</td>
                        </tr>
                        <tr class="highlight-row">
                            <td>Win Rate</td>
                            <td>51.5%</td>
                            <td>Slightly above random</td>
                        </tr>
                        <tr>
                            <td>Holding Period</td>
                            <td>5 days</td>
                            <td>Fixed exit timing</td>
                        </tr>
                        <tr class="highlight-row">
                            <td>Position Size</td>
                            <td>4%</td>
                            <td>Per stock (5 stocks = 20% deployed)</td>
                        </tr>
                        <tr>
                            <td>Retraining</td>
                            <td>Monthly</td>
                            <td>12-month rolling window</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Fee Analysis -->
        <section id="fees">
            <div class="section-header">
                <h2>Fee Analysis</h2>
                <p>Impact of trading fees across different platforms</p>
            </div>

            <div class="performance-table">
                <h3>üí∞ Fee Impact by Platform</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Platform</th>
                            <th>Commission</th>
                            <th>PFOF</th>
                            <th>Total Fee Drag</th>
                            <th>Net Return</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="highlight-row">
                            <td>IBKR Pro</td>
                            <td>$0.005/share</td>
                            <td>None</td>
                            <td class="positive">0.04%</td>
                            <td class="positive">229.6%</td>
                        </tr>
                        <tr>
                            <td>IBKR Lite</td>
                            <td>$0</td>
                            <td>0.3 bps</td>
                            <td class="positive">0.04%</td>
                            <td class="positive">229.5%</td>
                        </tr>
                        <tr class="highlight-row">
                            <td>Alpaca</td>
                            <td>$0</td>
                            <td>1.0 bps</td>
                            <td class="positive">0.06%</td>
                            <td class="positive">229.3%</td>
                        </tr>
                        <tr>
                            <td>Fidelity</td>
                            <td>$0</td>
                            <td>1.0 bps</td>
                            <td class="positive">0.06%</td>
                            <td class="positive">229.3%</td>
                        </tr>
                        <tr class="highlight-row">
                            <td>Schwab/TD</td>
                            <td>$0</td>
                            <td>2.0 bps</td>
                            <td>0.08%</td>
                            <td class="positive">229.1%</td>
                        </tr>
                        <tr>
                            <td>Robinhood</td>
                            <td>$0</td>
                            <td>3.0 bps</td>
                            <td>0.10%</td>
                            <td class="positive">228.9%</td>
                        </tr>
                    </tbody>
                </table>
                <p class="table-note">Fee drag is minimal (&lt;0.1%) because the strategy only makes ~5 trades/day with a 5-day hold period</p>
            </div>
        </section>

        <!-- Leakage & Bias -->
        <section id="validation">
            <div class="section-header">
                <h2>Validation & Reality Check</h2>
                <p>Important caveats and bias analysis</p>
            </div>

            <div class="chart-container">
                <div class="chart-title">Reality Check: Accounting for Biases</div>
                <img src="assets/bias_reality_check.png" alt="Bias Reality Check">
            </div>

            <div class="warning-card">
                <h3>‚ö†Ô∏è Important Caveats</h3>
                <ul>
                    <li><strong>Survivorship Bias:</strong> Backtest uses current S&P 500 constituents, not historical. Stocks that got delisted/removed are not included. This likely inflates returns by 20-40%.</li>
                    <li><strong>No Direct Leakage:</strong> Comprehensive audit found no look-ahead bias in feature calculations. All predictions use only data available at prediction time.</li>
                    <li><strong>Real Data:</strong> Using actual yfinance historical data, not synthetic. Verified by checking actual market events (COVID crash, meme stocks, etc.)</li>
                    <li><strong>Conservative Estimate:</strong> After accounting for survivorship bias, realistic alpha is likely 30-60% over 6 years, not 97%.</li>
                </ul>
            </div>

            <div class="performance-table">
                <h3>‚úÖ Leakage Audit Results</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Check</th>
                            <th>Status</th>
                            <th>Details</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Feature Calculation</td>
                            <td class="positive">‚úì PASS</td>
                            <td>All indicators use only past data</td>
                        </tr>
                        <tr>
                            <td>Training Data</td>
                            <td class="positive">‚úì PASS</td>
                            <td>Train/test split is chronological</td>
                        </tr>
                        <tr>
                            <td>Prediction Time</td>
                            <td class="positive">‚úì PASS</td>
                            <td>Model uses T-1 close data for T predictions</td>
                        </tr>
                        <tr>
                            <td>Trade Execution</td>
                            <td class="positive">‚úì PASS</td>
                            <td>Entry at T open, exit at T+5 close</td>
                        </tr>
                        <tr>
                            <td>Survivorship Bias</td>
                            <td class="negative">‚ö†Ô∏è PRESENT</td>
                            <td>Using current S&P 500 constituents</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Live Trading -->
        <section id="live">
            <div class="section-header">
                <h2>Live Trading Deployment</h2>
                <p>Currently running on Alpaca Paper Trading & Google Cloud</p>
            </div>

            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-icon">ü§ñ</div>
                    <h3>Alpaca Integration</h3>
                    <p>Connected to Alpaca Markets paper trading account for live execution</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">‚òÅÔ∏è</div>
                    <h3>Google Cloud</h3>
                    <p>Deployed on GCP e2-small VM (~$15/month) with systemd service</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">‚è∞</div>
                    <h3>Daily Schedule</h3>
                    <p>Runs at 9:35am ET daily to select stocks and manage positions</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üì±</div>
                    <h3>Monitoring</h3>
                    <p>View positions and performance in Alpaca dashboard</p>
                </div>
            </div>

            <div class="code-block">
                <div class="code-header">Today's Picks (Example)</div>
                <pre><code>üéØ Today's Top 5 Picks:
  1. TEAM  - Prob: 64.0% (Software)
  2. CCL   - Prob: 63.2% (Travel)
  3. INTU  - Prob: 62.9% (FinTech)
  4. SPY   - Prob: 62.8% (Index)
  5. K     - Prob: 62.6% (Consumer)</code></pre>
            </div>

            <div class="code-block">
                <div class="code-header">Quick Start Commands</div>
                <pre><code># Test the stock picker (dry run)
python3 live_trading/stock_picker_bot.py --test-picks

# Run the stock picker bot
python3 live_trading/run_stock_picker.py

# Deploy to Google Cloud
./live_trading/deploy/deploy.sh trading-bot-vm us-central1-a --stock-picker

# View service logs
sudo journalctl -u stock-picker -f</code></pre>
            </div>
        </section>

        <!-- CTA -->
        <section>
            <div class="cta-section">
                <h2>Explore the Code</h2>
                <p>Full source code, documentation, and deployment scripts available on GitHub</p>
                <a href="https://github.com/um-mepel/spy-trading-bot" class="btn" target="_blank">View Repository</a>
                <a href="minute-model.html" class="btn btn-secondary">View Minute Model</a>
            </div>
        </section>
    </main>

    <footer>
        <p>Built by <a href="https://github.com/um-mepel">@um-mepel</a> | 
           Data from <a href="https://alpaca.markets">Alpaca Markets</a> & <a href="https://pypi.org/project/yfinance/">yfinance</a></p>
        <p class="disclaimer">
            ‚ö†Ô∏è For educational purposes only. Past performance does not guarantee future results. 
            Trading involves substantial risk of loss. Survivorship bias likely inflates backtest results.
        </p>
    </footer>
</body>
</html>
